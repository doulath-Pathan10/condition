import React from 'react';
import { render, screen } from '@testing-library/react';
import { Provider } from 'react-redux';
import { configureStore } from '@reduxjs/toolkit';
import lovReducer from './lov-slice';
import { useDispatch } from 'react-redux';
import { lovAction } from './lov-slice';

const TestComponent = () => {
  const dispatch = useDispatch();
  
  const handleAddLov = () => {
    dispatch(lovAction.getLovData({
      label: 'test_label',
      value: ['test_value']
    }));
  };

  return (
    <div>
      <button onClick={handleAddLov}>Add LOV</button>
    </div>
  );
};

describe('LOV Redux Integration', () => {
  it('should dispatch getLovData action', () => {
    const store = configureStore({
      reducer: {
        lov: lovReducer
      }
    });

    render(
      <Provider store={store}>
        <TestComponent />
      </Provider>
    );

    const button = screen.getByText('Add LOV');
    button.click();

    const state = store.getState();
    expect(state.lov.lov).toHaveLength(1);
    expect(state.lov.lov[0].label).toBe('test_label');
  });
});
